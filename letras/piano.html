<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" 
    rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" 
    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="../layoutcss.css">
  <title>JS Drum Kit</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="style2.css">
</head>
<body>

  <nav class="navbar navbar-light navbar">
    <div class="container-fluid">
      <a class="navbar-brand brand" style="color: #F1E9E5;font-weight: 900;" href="../index.html"><span class="spann">Fun</span>Spanish</a>
    </div>
  </nav>
  <h1 class="paragraph">done with the alphabet? now It's music time!!</h1>
  <div id="keys" class="container keys">
    <div class="row">
    <div data-key="65" class="key">
      <kbd>A</kbd>
      <span class="sound">clap</span>
    </div>
    <div data-key="83" class="key">
      <kbd>S</kbd>
      <span class="sound">hihat</span>
    </div>
    <div data-key="68" class="key">
      <kbd>D</kbd>
      <span class="sound">kick</span>
    </div>
    <div data-key="70" class="key">
      <kbd>F</kbd>
      <span class="sound">openhat</span>
    </div>
    <div data-key="71" class="key">
      <kbd>G</kbd>
      <span class="sound">boom</span>
    </div>
    <div data-key="72" class="key">
      <kbd>H</kbd>
      <span class="sound">ride</span>
    </div>
    <div data-key="74" class="key">
      <kbd>J</kbd>
      <span class="sound">snare</span>
    </div>
    <div data-key="75" class="key">
      <kbd>K</kbd>
      <span class="sound">tom</span>
    </div>
    <div data-key="76" class="key">
      <kbd>L</kbd>
      <span class="sound">tink</span>
    </div>
    <a class="key" data-bs-toggle="modal" id="ModalBtn" href="#exampleModalToggle" role="button">Back to study</a>
  </div>
</div>

  <audio data-key="65" src="sounds/clap.wav"></audio>
  <audio data-key="83" src="sounds/hihat.wav"></audio>
  <audio data-key="68" src="sounds/kick.wav"></audio>
  <audio data-key="70" src="sounds/openhat.wav"></audio>
  <audio data-key="71" src="sounds/boom.wav"></audio>
  <audio data-key="72" src="sounds/ride.wav"></audio>
  <audio data-key="74" src="sounds/snare.wav"></audio>
  <audio data-key="75" src="sounds/tom.wav"></audio>
  <audio data-key="76" src="sounds/tink.wav"></audio>

  <!-- #######Modal################### -->
  <div class="modal fade" id="exampleModalToggle" aria-hidden="true" aria-labelledby="exampleModalToggleLabel" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title" id="exampleModalToggleLabel">Oye!!</h4>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body modalonetext">
          jugar juegar! no tienes nada mas importante que hacer, Estudiar español por ejemplo!!!
        </div>
        <div class="modal-footer">
          <button class="btn btn-primary" data-bs-target="#exampleModalToggle2" data-bs-toggle="modal" data-bs-dismiss="modal">no me importa!</button>
          <a class="btn btn-primary" href="../game2/practive listening.html">Go to study</a>
        </div>
      </div>
    </div>
  </div>
  <div class="modal fade" id="exampleModalToggle2" aria-hidden="true" aria-labelledby="exampleModalToggleLabel2" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalToggleLabel2">¡Dije que vayas a estudiar!</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <img class="center slap" id="slapimg" src="images/slap1.gif">
        </div>
        <div class="modal-footer">
          <a class="btn btn-primary" href="../game2/practive listening.html">okay okay</a>
        </div>
      </div>
    </div>
  </div>

<script>
  function randomIntFromInterval(min, max) { // min and max included 
    return Math.floor(Math.random() * (max - min + 1) + min)
  }
  const rndInt = randomIntFromInterval(1, 10)
  console.log(rndInt)
  var imgname='images/slap'+rndInt.toString()+'.gif'

  document.getElementById('slapimg').setAttribute('src',imgname)
  function removeTransition(e) {
    if (e.propertyName !== 'transform') return;
    e.target.classList.remove('playing');
  }

  function playSound(e) {
    
    if(!e.keyCode){
      const letter = this.getAttribute('data-key')
      var audio = document.querySelector(`audio[data-key="${letter}"]`);
      var key = document.querySelector(`div[data-key="${letter}"]`);
      console.log('firstCase');
    }else{
      var audio = document.querySelector(`audio[data-key="${e.keyCode}"]`);
      var key = document.querySelector(`div[data-key="${e.keyCode}"]`);
      console.log('secondCase');
    }
    if (!audio) return;
    
    setTimeout(function() {
      document.getElementById('ModalBtn').click()
      console.log('timeout')
    }, 2000); 

    key.classList.add('playing');
    audio.currentTime = 0;
    audio.play();
  }
  const keys = Array.from(document.querySelectorAll('.key'));
  keys.forEach(key => key.addEventListener('transitionend', removeTransition));
  window.addEventListener('keydown', playSound);
  keys.forEach(key=> key.addEventListener('click', playSound));
</script>
</body>
  
</html>
